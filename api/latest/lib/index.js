var scheduler=void 0,title=$(document).attr("title"),lastFragment="",Index={};!function(e){e.keyLength=0,e.keys=function(t){var n,r=[];for(n in t)r.push(n),e.keyLength++;return r}}(Index);var QueryString=function(e){void 0===QueryString.map&&(QueryString.map={},window.location.search.split("?").pop().split("&").forEach(function(e){var t=e.split("=");2==t.length&&(QueryString.map[t[0]]=t[1])}));return QueryString.map[e]};function handleKeyNavigation(){var e=function(e,t){var n=this;this.index=-1,this.items=e,this.litems=e,this.ritems=t,0==e.length&&(this.items=t),n.next=function(){return n.index=Math.min(n.items.length-1,n.index+1),$(n.items[n.index])},n.prev=function(){return n.index=Math.max(-1,n.index-1),-1==n.index?void 0:$(n.items[n.index])},n.right=function(){return 0!=n.ritems.length&&(n.items=n.ritems,n.index=Math.min(n.index,n.items.length-1)),$(n.items[n.index])},n.left=function(){return 0!=n.litems.length&&(n.items=n.litems,n.index=Math.min(n.index,n.items.length-1)),$(n.items[n.index])}};function t(e){return e.length?e.offset():{top:0,left:0}}var n=function(e){scroller=this,scroller.container=e,scroller.scrollDown=function(n){var r=t(n);if(void 0!==r){var a=r.top;(e.height()<a||a-$("#search").height()<0)&&e.animate({scrollTop:e.scrollTop()+a-$("#search").height()-10},200)}},scroller.scrollUp=function(n){var r=t(n);if(void 0!==r){var a=r.top;a<$("#search").height()&&e.animate({scrollTop:e.scrollTop()+a-$("#search").height()-10},200)}},scroller.scrollTop=function(){e.animate({scrollTop:0},200)}};scheduler.add("init",function(){$("#textfilter input").trigger("blur");var r=new e($("div#results-content > div#entity-results > ul.entities span.entity > a").toArray(),$("div#results-content > div#member-results > ul.entities span.entity > a").toArray()),a=new n($("#search-results")),i=r.next();i.addClass("selected"),a.scrollDown(i),$(window).on("keydown",function(e){switch(e.keyCode){case 9:i.removeClass("selected");break;case 13:var n=i.attr("href");location.replace(n),i.trigger("click"),$("#textfilter input").val("");break;case 27:$("#textfilter input").val(""),$("div#search-results").hide(),$("#search > span.close-results").hide(),$("#search > span#doc-title").show();break;case 37:var s=t(i).top;i.removeClass("selected"),(i=r.left()).addClass("selected"),(s-t(i).top<0?a.scrollDown:a.scrollUp)(i);break;case 38:if(i.removeClass("selected"),void 0===(i=r.prev()))return $(window).off("keydown"),$("#textfilter input").trigger("focus"),a.scrollTop(),!1;i.addClass("selected"),a.scrollUp(i);break;case 39:s=t(i).top;i.removeClass("selected"),(i=r.right()).addClass("selected"),(s-t(i).top<0?a.scrollDown:a.scrollUp)(i);break;case 40:i.removeClass("selected"),(i=r.next()).addClass("selected"),a.scrollDown(i)}})})}function configureTextFilter(){scheduler.add("init",function(){var e=$("#textfilter input");e.on("keyup",function(t){switch(t.keyCode){case 27:e.val(""),$("div#search-results").hide(),$("#search > span.close-results").hide(),$("#search > span#doc-title").show();break;case 38:return!1;case 40:return $(window).off("keydown"),handleKeyNavigation(),!1}searchAll()})}),scheduler.add("init",function(){$("#textfilter > .input > .clear").on("click",function(){$("#textfilter input").val(""),$("div#search-results").hide(),$("#search > span.close-results").hide(),$("#search > span#doc-title").show(),$(this).hide()})}),scheduler.add("init",function(){$("div#search > span.close-results").on("click",function(){$("div#search-results").hide(),$("#search > span.close-results").hide(),$("#search > span#doc-title").show(),$("#textfilter input").val("")})})}function compilePattern(e){var t=e.replace(/([\.\*\+\?\|\(\)\[\]\\])/g,"\\$1");return e.toLowerCase()!=e?new RegExp(t.replace(/([A-Z])/g,"[a-z]*$1")):new RegExp(t,"i")}function searchPackage(e,t){scheduler.add("search",function(){var n=Index.PACKAGES[e],r=[],a=[];scheduler.add("search",function(){searchMembers(n,t,e)}),n.forEach(function(e){t.test(e.name)?r.push(e):a.push(e)});var i={matched:r,package:e};scheduler.add("search",function(){handleSearchedPackage(i,t),setProgress()})})}function searchMembers(e,t,n){var r=document.getElementById("member-results"),a=document.createElement("a");a.className="package",a.appendChild(document.createTextNode(n)),a.style.display="none",a.title=n,a.href=toRoot+urlFriendlyEntity(n).replace(new RegExp("\\.","g"),"/")+"/index.html",r.appendChild(a);var i=document.createElement("ul");i.className="entities",r.appendChild(i),e.forEach(function(e){var n=document.createElement("li"),r=e.name.split(".").pop(),s=document.createElement("a");if(s.className="icon "+e.kind,s.title=r+" "+e.kind,s.href=toRoot+e[e.kind],n.appendChild(s),"object"!=e.kind&&e.object){var c=document.createElement("a");c.className="icon object",c.title=r+" companion object",c.href=toRoot+e.object,n.insertBefore(c,s)}else{var l=document.createElement("div");l.className="icon spacer",n.insertBefore(l,s)}var o=document.createElement("span");o.className="entity";var d=document.createElement("a");d.title=e.shortDescription?e.shortDescription:r,d.href=toRoot+e[e.kind],d.appendChild(document.createTextNode(r)),o.appendChild(d),n.appendChild(o);var u=document.createElement("ul");u.className="members",n.appendChild(u),searchEntity(e,u,t).then(function(e){e.length>0&&(a.style.display="block",i.appendChild(n))})})}function insertSorted(e,t){for(var n=e.childNodes,r=null,a=0;a<n.length;a++)n[a].id>t.id&&(r=n[a]);e.insertBefore(t,r)}function handleSearchedPackage(e,t){$("div#search-results").show(),$("#search > span.close-results").show(),$("#search > span#doc-title").hide();document.getElementById("results-content");var n=document.getElementById("entity-results"),r=document.createElement("a");r.className="package",r.title=e.package,r.href=toRoot+urlFriendlyEntity(e.package).replace(new RegExp("\\.","g"),"/")+"/index.html",r.appendChild(document.createTextNode(e.package)),0==e.matched.length&&(r.style.display="none"),n.appendChild(r);var a=document.createElement("ul");a.className="entities",e.matched.map(function(e){return listItem(e,t)}).forEach(function(e){a.appendChild(e)}),n.appendChild(a)}function searchEntity(e,t,n){return new Promise(function(t,r){var a=(e.members_trait||[]).concat(e.members_class||[]).concat(e.members_object||[]);t($.grep(a,function(e,t){return n.test(e.label)}))}).then(function(e){return e.forEach(function(e){var n=document.createElement("span");n.className="kind",n.appendChild(document.createTextNode(e.kind));var r=document.createElement("a");r.title=e.label,r.href=toRoot+e.link,r.className="label",r.appendChild(document.createTextNode(e.label));var a=document.createElement("span");a.className="tail",a.appendChild(document.createTextNode(e.tail));var i=document.createElement("li");i.appendChild(n),i.appendChild(r),i.appendChild(a),t.appendChild(i)}),e})}function listItem(e,t){var n=e.name.split(".").pop(),r=document.createElement("span");r.className="entity";var a=document.createElement("a");a.title=e.shortDescription?e.shortDescription:n,a.href=toRoot+e[e.kind],a.appendChild(document.createTextNode(n)),r.appendChild(a);var i=document.createElement("a");i.className="icon "+e.kind,i.title=n+" "+e.kind,i.href=toRoot+e[e.kind];var s=document.createElement("li");if(s.id=e.name.replace(new RegExp("\\.","g"),"-"),s.appendChild(i),s.appendChild(r),"object"!=e.kind&&e.object){var c=document.createElement("a");c.title=n+" companion object",c.href=toRoot+e.object,c.className="icon object",s.insertBefore(c,i)}else{var l=document.createElement("div");l.className="icon spacer",s.insertBefore(l,i)}var o=document.createElement("ul");return o.className="members",s.appendChild(o),s}function searchAll(){scheduler.clear("search"),maxJobs=1;var e=($("#textfilter input").val()||"").trim();if(""===e)return $("div#search-results").hide(),$("#search > span.close-results").hide(),void $("#search > span#doc-title").show();try{window.history.replaceState({},"","?search="+e)}catch(s){}$("div#results-content > span.search-text").remove();var t=document.getElementById("member-results");t.innerHTML="";var n=document.createElement("h1");n.className="result-type",n.innerHTML="Member results",t.appendChild(n);var r=document.getElementById("entity-results");r.innerHTML="";var a=document.createElement("h1");a.className="result-type",a.innerHTML="Entity results",r.appendChild(a),$("div#results-content").prepend($("<span>").addClass("search-text").append(document.createTextNode("  Showing results for ")).append($("<span>").addClass("query-str").text(e)));var i=compilePattern(e);Index.keys(Index.PACKAGES).sort().forEach(function(e){searchPackage(e,i)})}function isMobile(){return/Android|webOS|Mobi|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function urlFriendlyEntity(e){var t={"\\+":"$plus",":":"$colon"};for(k in t)e=e.replace(new RegExp(k,"g"),t[k]);return e}$(document).ready(function(){$("#doc-title").on("click",function(){document.location=toRoot+"index.html"}),(scheduler=new Scheduler).addLabel("init",1),scheduler.addLabel("focus",2),scheduler.addLabel("filter",4),scheduler.addLabel("search",5),configureTextFilter(),$("#index-input").on("input",function(e){$(this).val().length>0?$("#textfilter > .input > .clear").show():$("#textfilter > .input > .clear").hide()}),void 0!==QueryString("search")&&($("#index-input").val(QueryString("search")),searchAll())});var maxJobs=1;function setProgress(){var e=scheduler.numberOfJobs("search"),t=100-e/(maxJobs=Math.max(maxJobs,e))*100,n=document.getElementById("progress-fill");n.style.height="100%",n.style.width=t+"%",100==t&&setTimeout(function(){n.style.height=0},500)}