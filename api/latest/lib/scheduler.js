function Scheduler(){var e=this;this.timeout=void 0,this.queues=new Array(0),this.labels=new Array(0),this.label=function(e,n){this.name=e,this.priority=n},this.work=function(e,n,t){this.fn=e,this.self=n,this.args=t},this.addLabel=function(n,t){for(var u=0;u<e.queues.length&&e.labels[u].priority<=t;)u+=1;e.labels.splice(u,0,new e.label(n,t)),e.queues.splice(u,0,new Array(0))},this.clearLabel=function(n){var t=e.indexOf(n);-1!=t&&(e.labels.splice(t,1),e.queues.splice(t,1))},this.nextWork=function(){for(var n=void 0,t=0;t<e.queues.length&&0==e.queues[t].length;)t+=1;if(t<e.queues.length&&e.queues[t].length>0)n=e.queues[t].shift();return n},this.add=function(n,t,u,i){var s=function(){e.timeout=setTimeout(function(){var n=e.nextWork();null!=n?(null==n.args&&(n.args=new Array(0)),n.fn.apply(n.self,n.args),s()):e.timeout=void 0},0)},r=e.indexOf(n);if(-1==r)throw"queue for add is non-existent";e.queues[r].push(new e.work(t,u,i)),null==e.timeout&&s()},this.clear=function(n){e.queues[e.indexOf(n)]=new Array},this.indexOf=function(n){for(var t=0;t<e.labels.length&&e.labels[t].name!=n;)t++;return t<e.queues.length&&e.labels[t].name==n?t:-1},this.queueEmpty=function(n){var t=e.indexOf(n);if(-1!=t)return 0==e.queues[t].length;throw"queue for label '"+n+"' is non-existent"},this.scheduleLast=function(n,t){e.queueEmpty(n)?t():e.add(n,function(){e.scheduleLast(n,t)})},this.numberOfJobs=function(n){var t=e.indexOf(n);if(-1==t)throw"queue for label '"+n+"' non-existent";return e.queues[t].length}}